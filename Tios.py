import telebot
from telebot import types
import time
import requests
from datetime import datetime, timedelta
from config import TOKEN

bot = telebot.TeleBot(TOKEN)
user_data = {}

# –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±–æ—Ç–∞
LEVELS = {
    'üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞': [
        '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)',
        '–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)',
        '–≠–∫–æ–Ω–æ–º–∏–∫–∞ (–≠–∫–æ–Ω–æ–º–∏–∫–∞ —Ñ–∏—Ä–º—ã)',
        '–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è)',
        '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)',
        '–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)'
    ],
    'üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç': [
        '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)',
        '–†–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–ë—ã—Ç–æ–≤–∞—è —Ä–∞–¥–∏–æ—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–∞)',
        '–ò–Ω—Ñ–æ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å–∏—Å—Ç–µ–º—ã —Å–≤—è–∑–∏ (–°–∏—Å—Ç–µ–º—ã –º–æ–±–∏–ª—å–Ω–æ–π —Å–≤—è–∑–∏)',
        '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—à–∏–Ω—ã –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–ë—ã—Ç–æ–≤—ã–µ –º–∞—à–∏–Ω—ã –∏ –ø—Ä–∏–±–æ—Ä—ã)',
        '–¢–µ—Ö–Ω–æ—Å—Ñ–µ—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –æ—Ö—Ä–∞–Ω–æ–π —Ç—Ä—É–¥–∞)',
        '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)',
        '–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)',
        '–≠–∫–æ–Ω–æ–º–∏–∫–∞ (–§–∏–Ω–∞–Ω—Å—ã –∏ –∫—Ä–µ–¥–∏—Ç, –≠–∫–æ–Ω–æ–º–∏–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á–µ—Ç, –∞–Ω–∞–ª–∏–∑ –∏ –∞—É–¥–∏—Ç)',
        '–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)',
        '–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ —ç–Ω–µ—Ä–≥–æ–∞—É–¥–∏—Ç, —Å–µ—Ä–≤–∏—Å –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è—Ö –ø–∏—Ç–∞–Ω–∏—è)',
        '–¢—É—Ä–∏–∑–º (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏—Ö –∏ —Ç—É—Ä–∞–≥–µ–Ω—Ç—Å–∫–∏—Ö —É—Å–ª—É–≥)'
    ],
    'üìó–°–ü–û': [
        '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)',
        '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)',
        '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)',
        '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)'
    ]
}

# –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º
COSTS = {
    "üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç": {
        "–≠–∫–æ–Ω–æ–º–∏–∫–∞ (–§–∏–Ω–∞–Ω—Å—ã –∏ –∫—Ä–µ–¥–∏—Ç, –≠–∫–æ–Ω–æ–º–∏–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á–µ—Ç, –∞–Ω–∞–ª–∏–∑ –∏ –∞—É–¥–∏—Ç)": {
            "–û—á–Ω–∞—è": "122500 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "43600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)": {
            "–û—á–Ω–∞—è": "122500 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "43600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ —ç–Ω–µ—Ä–≥–æ–∞—É–¥–∏—Ç, —Å–µ—Ä–≤–∏—Å –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è—Ö –ø–∏—Ç–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "122500 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–¢—É—Ä–∏–∑–º (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏—Ö –∏ —Ç—É—Ä–∞–≥–µ–Ω—Ç—Å–∫–∏—Ö —É—Å–ª—É–≥)": {
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)": {
            "–û—á–Ω–∞—è": "139600 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "43600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–ò–Ω—Ñ–æ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å–∏—Å—Ç–µ–º—ã —Å–≤—è–∑–∏ (–°–∏—Å—Ç–µ–º—ã –º–æ–±–∏–ª—å–Ω–æ–π —Å–≤—è–∑–∏)": {
            "–û—á–Ω–∞—è": "139600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–†–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–ë—ã—Ç–æ–≤–∞—è —Ä–∞–¥–∏–æ—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–∞)": {
            "–û—á–Ω–∞—è": "139600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–¢–µ—Ö–Ω–æ—Å—Ñ–µ—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –æ—Ö—Ä–∞–Ω–æ–π —Ç—Ä—É–¥–∞)": {
            "–û—á–Ω–∞—è": "139600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)": {
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—à–∏–Ω—ã –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–ë—ã—Ç–æ–≤—ã–µ –º–∞—à–∏–Ω—ã –∏ –ø—Ä–∏–±–æ—Ä—ã)": {
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        },
        "–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)": {
            "–û—á–Ω–∞—è": "139600 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "43600 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "29900 —Ä—É–±–ª–µ–π"
        }
    },
    "üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞": {
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)": {
            "–û—á–Ω–∞—è": "149400 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "50500 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        },
        "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)": {
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        },
        "–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)": {
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        },
        "–≠–∫–æ–Ω–æ–º–∏–∫–∞ (–≠–∫–æ–Ω–æ–º–∏–∫–∞ —Ñ–∏—Ä–º—ã)": {
            "–û—á–Ω–∞—è": "132200 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "50500 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        },
        "–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)": {
            "–û—á–Ω–∞—è": "132200 —Ä—É–±–ª–µ–π",
            "–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è": "50500 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        },
        "–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "132200 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "39400 —Ä—É–±–ª–µ–π"
        }
    },
    "üìó–°–ü–û": {
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "86400 —Ä—É–±–ª–µ–π"
        },
        "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "86400 —Ä—É–±–ª–µ–π"
        },
        "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "85300 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "21900 —Ä—É–±–ª–µ–π"
        },
        "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)": {
            "–û—á–Ω–∞—è": "85300 —Ä—É–±–ª–µ–π",
            "–ó–∞–æ—á–Ω–∞—è": "21900 —Ä—É–±–ª–µ–π"
        }
    }
}

CONTACT_INFO = """
<b>üè´–ö–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏:</b>
üìç –ê–¥—Ä–µ—Å: –≥. –°—Ç–∞–≤—Ä–æ–ø–æ–ª—å, –ø—Ä. –ö—É–ª–∞–∫–æ–≤–∞, 41/1, –∫–∞–±. 110
üìû –¢–µ–ª–µ—Ñ–æ–Ω: 8 (8652) 39-69-97
üïí –ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã: 
–ü–Ω-–ü—Ç: 8:00-17:00 (–ø–µ—Ä–µ—Ä—ã–≤ 12:00-13:00)
–°–±: 9:00-14:00
üåê –°–∞–π—Ç: https://stis.su
üìß Email: otcom@stis.su
"""

ABOUT_UNI = """
<b>üéì –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç —Å–µ—Ä–≤–∏—Å–∞ (–¢–ò–°)</b> - —Ñ–∏–ª–∏–∞–ª –î–æ–Ω—Å–∫–æ–≥–æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ (–î–ì–¢–£) –≤ –°—Ç–∞–≤—Ä–æ–ø–æ–ª–µ!

üåü <b>–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>
‚úÖ <b>–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–ø–ª–æ–º</b> –î–ì–¢–£ –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É
ü§ù <b>–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∏</b> –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è—Ö –≤–µ–¥—É—â–µ–≥–æ –æ–ø–æ—Ä–Ω–æ–≥–æ –≤—É–∑–∞ –Æ–≥–∞ –†–æ—Å—Å–∏–∏
üíº <b>–¢—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</b> —É–∂–µ –Ω–∞ 3-4 –∫—É—Ä—Å–µ

üîÆ <b>–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</b>
üë®‚Äçüíª IT-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
üîß –°–µ—Ä–≤–∏—Å –∏ –∏–Ω–∂–µ–Ω–µ—Ä–∏—è
üìä –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
üé® –î–∏–∑–∞–π–Ω –∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ

üí´ <b>–°—Ç–∞–Ω—å —á–∞—Å—Ç—å—é –î–ì–¢–£</b> - —Å–æ–∑–¥–∞–≤–∞–π —Å–≤–æ—ë –±—É–¥—É—â–µ–µ –≤–º–µ—Å—Ç–µ —Å –Ω–∞–º–∏!
üöÄ –í—ã–±–∏—Ä–∞–π –ø—Ä–µ—Å—Ç–∏–∂–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —É—Å–ø–µ—à–Ω–æ–π –∫–∞—Ä—å–µ—Ä—ã!
"""


def get_moscow_time():
    moscow_time = datetime.utcnow() + timedelta(hours=3)
    return moscow_time.strftime("%H:%M:%S %d.%m.%Y")


# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
def get_documents_list(level):
    return (
        "\n\n<b>üìÑ –ü–µ—Ä–µ—á–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è:</b>\n"
        "- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è 3x4\n"
        "- –ö–æ–ø–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞\n"
        "- –°–ù–ò–õ–°\n"
        "- –ö–æ–ø–∏—è –ü–° –∏–ª–∏ –≤–æ–µ–Ω–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞\n"
    )


def create_inline_keyboard(items, row_width=2, back_button=False, home_button=False):
    markup = types.InlineKeyboardMarkup(row_width=row_width)
    buttons = []

    for item in items:
        if isinstance(item, tuple) and len(item) == 2:
            text, callback_data = item
            buttons.append(types.InlineKeyboardButton(
                text=text, callback_data=callback_data))
        else:
            buttons.append(types.InlineKeyboardButton(
                text=item, callback_data=item))

    for i in range(0, len(buttons), row_width):
        markup.add(*buttons[i:i+row_width])

    extra_buttons = []
    if back_button:
        extra_buttons.append(types.InlineKeyboardButton(
            text="‚¨Ö–ù–∞–∑–∞–¥", callback_data="back"))
    if home_button:
        extra_buttons.append(types.InlineKeyboardButton(
            text="üè†–ù–∞ –≥–ª–∞–≤–Ω—É—é", callback_data="home"))

    if extra_buttons:
        markup.add(*extra_buttons)

    return markup


# –ì–ª–∞–≤–Ω—ã–µ –º–µ–Ω—é
main_menu_buttons = [
    ("üìÑ–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö", "info_for_applicants"),
    ("üìû–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", "contact_info")
]

edu_menu_buttons = [
    ("üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞", "level_magistr"),
    ("üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç", "level_bakalavr"),
    ("üìó–°–ü–û", "level_spo"),
    ("–û –í—É–∑–µ", "about_uni")
]

finance_menu_buttons = [
    ("üí∞–ë—é–¥–∂–µ—Ç", "finance_budget"),
    ("üíµ–ö–æ–º–º–µ—Ä—Ü–∏—è", "finance_commercial")
]


@bot.message_handler(commands=['start'])
def start(message):
    chat_id = message.chat.id
    user_data[chat_id] = {"step": "main_menu"}

    text = f"–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
    markup = create_inline_keyboard(main_menu_buttons, row_width=1)

    bot.send_message(chat_id, text, reply_markup=markup)


@bot.message_handler(commands=['time'])
def send_moscow_time(message):
    time_str = get_moscow_time()
    bot.send_message(
        message.chat.id,
        f"‚è∞ –¢–µ–∫—É—â–µ–µ –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è:\n<b>{time_str}</b>",
        parse_mode='HTML'
    )


@bot.callback_query_handler(func=lambda call: True)
def handle_callback(call):
    chat_id = call.message.chat.id
    message_id = call.message.message_id
    data = call.data

    new_markup = None
    new_text = call.message.text

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    if data == "info_for_applicants":
        user_data[chat_id] = {"step": "edu_menu"}
        new_text = "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:"
        new_markup = create_inline_keyboard(
            edu_menu_buttons, row_width=2, back_button=True)

    elif data == "contact_info":
        user_data[chat_id] = {"step": "contacts"}
        new_text = CONTACT_INFO
        new_markup = create_inline_keyboard(
            [], back_button=False, home_button=True)

    elif data == "about_uni":
        user_data[chat_id] = {"step": "about"}
        new_text = ABOUT_UNI
        new_markup = create_inline_keyboard(
            [], back_button=True, home_button=True)

    elif data.startswith("level_"):
        level_type = data.split("_")[1]
        level_map = {
            "magistr": "üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞",
            "bakalavr": "üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç",
            "spo": "üìó–°–ü–û"
        }
        level_name = level_map.get(level_type)

        if level_name:
            user_data[chat_id] = {
                "step": "directions",
                "level": level_name
            }
            new_text = f"–í—ã –≤—ã–±—Ä–∞–ª–∏: {level_name}\n–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:"

            directions = []
            for i, direction in enumerate(LEVELS[level_name]):
                callback_data = f"direction_{level_type}_{i}"
                directions.append((direction, callback_data))

            new_markup = create_inline_keyboard(
                directions, row_width=1, back_button=True, home_button=True)

    elif data.startswith("direction_"):
        parts = data.split('_')
        if len(parts) >= 3:
            level_type = parts[1]
            direction_idx = int(parts[2])
            level_map = {
                "magistr": "üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞",
                "bakalavr": "üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç",
                "spo": "üìó–°–ü–û"
            }
            level_name = level_map.get(level_type)

            if level_name and direction_idx < len(LEVELS[level_name]):
                direction_name = LEVELS[level_name][direction_idx]

                user_data[chat_id] = {
                    "step": "finance",
                    "level": level_name,
                    "direction": direction_name
                }
                
                # –î–ª—è –°–ü–û –º–µ–Ω—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ "–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"
                if level_name == "üìó–°–ü–û":
                    new_text = f"–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: {direction_name}\n–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å–Ω–æ–≤—É –æ–±—É—á–µ–Ω–∏—è:"
                else:
                    new_text = f"–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {direction_name}\n–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å–Ω–æ–≤—É –æ–±—É—á–µ–Ω–∏—è:"
                    
                new_markup = create_inline_keyboard(
                    finance_menu_buttons, row_width=2, back_button=True, home_button=True)

    elif data.startswith("finance_"):
        if "direction" in user_data.get(chat_id, {}):
            finance_type = data.split("_")[1]
            finance_name = "üí∞–ë—é–¥–∂–µ—Ç" if finance_type == "budget" else "üíµ–ö–æ–º–º–µ—Ä—Ü–∏—è"

            data_dict = user_data[chat_id]
            level = data_dict['level']
            direction = data_dict['direction']

            # –î–ª—è –°–ü–û –º–µ–Ω—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ "–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"
            level_label = "–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å" if level == "üìó–°–ü–û" else "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±–æ—Ä–µ
            response = (
                f"<b>–í–∞—à –≤—ã–±–æ—Ä:</b>\n"
                f"‚Ä¢ –£—Ä–æ–≤–µ–Ω—å: {level}\n"
                f"‚Ä¢ {level_label}: {direction}\n"
                f"‚Ä¢ –û—Å–Ω–æ–≤–∞: {finance_name}\n\n"
            )

            # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π –æ—Å–Ω–æ–≤—ã
            if finance_type == "commercial":
                if level in COSTS and direction in COSTS[level]:
                    costs_for_direction = COSTS[level][direction]
                    response += "üí∏ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è –∑–∞ –≥–æ–¥:</b>\n\n"
                    for form, cost in costs_for_direction.items():
                        response += f"üìë{form}: {cost}\n"
                    response += "\nüí° <b>–û–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ —Å–µ–º–µ—Å—Ç—Ä–∞–º</b>\n\n"
                else:
                    response += "üí∏ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è:</b> —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                    response += "üí° <b>–û–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ —Å–µ–º–µ—Å—Ç—Ä–∞–º</b>\n\n"

            # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ä–º–∞—Ö –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã
            if level == "üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞":
                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç
                if finance_type == "budget":
                    # –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –±—é–¥–∂–µ—Ç–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏
                    if direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)":
                        response += (
                            "üìà–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 20\n\n"
                            "üìë–û—á–Ω–∞—è - 2 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                            "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                            "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 2.5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - 3 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    elif direction == "–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)":
                        response += (
                            "üìà–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 20\n\n"
                            "üìë–û—á–Ω–∞—è - 2 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 3 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                            "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 2.5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                        )
                    elif direction == "–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è)":
                        response += (
                            "üìà–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: 20\n\n"
                            "üìë–û—á–Ω–∞—è - 2 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - - (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 2.5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    else:
                        # –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã
                        response += "‚ö†Ô∏è –í —ç—Ç–æ–º –≥–æ–¥—É –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç –Ω–µ—Ç.\n\n"
                        new_text = response
                        new_markup = create_inline_keyboard(
                            [], back_button=True, home_button=True)
                        bot.edit_message_text(
                            chat_id=chat_id,
                            message_id=message_id,
                            text=new_text,
                            reply_markup=new_markup,
                            parse_mode='HTML'
                        )
                        return

                # –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã
                response += (
                    "üìÖ <b>–ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:</b> —Å 20 –∏—é–Ω—è –ø–æ 20 –∞–≤–≥—É—Å—Ç–∞\n"
                    "üìù <b>–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π:</b> "
                )

                if finance_type == "budget":
                    response += "—Å 21 –∏—é–Ω—è –ø–æ 15 –∞–≤–≥—É—Å—Ç–∞\n"
                    response += "üìã <b>–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤:</b> 26 –∞–≤–≥—É—Å—Ç–∞\n\n"
                    response += (
                        "üñã <b>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ:</b>\n"
                        "   24 –∞–≤–≥—É—Å—Ç–∞ –¥–æ 12:00 (–æ—Å–Ω–æ–≤–Ω–æ–π —ç—Ç–∞–ø –∑–∞—á–∏—Å–ª–µ–Ω–∏—è)\n"
                        "‚úÖ <b>–ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:</b> 29 –∞–≤–≥—É—Å—Ç–∞\n\n"
                    )
                else:
                    response += "—Å 21 –∏—é–Ω—è –ø–æ 30 –∞–≤–≥—É—Å—Ç–∞\n"
                    response += "üìã <b>–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤:</b> –ï–∂–µ–¥–Ω–µ–≤–Ω–æ\n\n"
                    response += (
                        "üñã <b>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ:</b>\n"
                        "   –ó–∞ –¥–µ–Ω—å –¥–æ –ø—Ä–∏–∫–∞–∑–∞\n"
                        "‚úÖ <b>–ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:</b> —Å 01 –∏—é–ª—è –ø–æ 30 —Å–µ–Ω—Ç—è–±—Ä—è\n\n"
                    )

                response += "üìö <b>–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è:</b> –ú–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–π —ç–∫–∑–∞–º–µ–Ω –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é"

            # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–æ—Ä–º–∞—Ö –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞
            elif level == "üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç":
                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç
                if finance_type == "budget":
                    # –î–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—Å–∫–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç –Ω–µ—Ç
                    if direction == "–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)":
                        response += "‚ö†Ô∏è –í —ç—Ç–æ–º –≥–æ–¥—É –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç –Ω–µ—Ç.\n\n"
                        new_text = response
                        new_markup = create_inline_keyboard(
                            [], back_button=True, home_button=True)
                        bot.edit_message_text(
                            chat_id=chat_id,
                            message_id=message_id,
                            text=new_text,
                            reply_markup=new_markup,
                            parse_mode='HTML'
                        )
                        return
                    else:
                        # –§–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–∞—Ö
                        places_info = ""
                        if direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 5 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 4 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–†–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏–∫–∞ (–ë—ã—Ç–æ–≤–∞—è —Ä–∞–¥–∏–æ—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–∞)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: 7 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–ò–Ω—Ñ–æ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å–∏—Å—Ç–µ–º—ã —Å–≤—è–∑–∏ (–°–∏—Å—Ç–µ–º—ã –º–æ–±–∏–ª—å–Ω–æ–π —Å–≤—è–∑–∏)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: 7 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 15 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—à–∏–Ω—ã –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–ë—ã—Ç–æ–≤—ã–µ –º–∞—à–∏–Ω—ã –∏ –ø—Ä–∏–±–æ—Ä—ã)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 5 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–¢–µ—Ö–Ω–æ—Å—Ñ–µ—Ä–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –æ—Ö—Ä–∞–Ω–æ–π —Ç—Ä—É–¥–∞)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 6 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–¥–µ–ª–∏–π –ª–µ–≥–∫–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —à–≤–µ–π–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 4 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–≠–∫–æ–Ω–æ–º–∏–∫–∞ (–§–∏–Ω–∞–Ω—Å—ã –∏ –∫—Ä–µ–¥–∏—Ç, –≠–∫–æ–Ω–æ–º–∏–∫–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á–µ—Ç, –∞–Ω–∞–ª–∏–∑ –∏ –∞—É–¥–∏—Ç)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 1 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                            )
                        elif direction == "–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 1 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                            )
                        elif direction == "–°–µ—Ä–≤–∏—Å (–°–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ —ç–Ω–µ—Ä–≥–æ–∞—É–¥–∏—Ç, —Å–µ—Ä–≤–∏—Å –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è—Ö –ø–∏—Ç–∞–Ω–∏—è)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 14 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )
                        elif direction == "–¢—É—Ä–∏–∑–º (–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏—Ö –∏ —Ç—É—Ä–∞–≥–µ–Ω—Ç—Å–∫–∏—Ö —É—Å–ª—É–≥)":
                            places_info = (
                                "üìë–û—á–Ω–∞—è - 4 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç: —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÉ–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è ‚Äì 4,5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - —É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏\n\n"
                                "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 4.5 –≥–æ–¥–∞\n"
                                "–í—Å–µ–≥–æ –º–µ—Å—Ç - 15 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            )

                        response += "üìà–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª –Ω–∞ –æ—Å–Ω–æ–≤—É –æ–±—É—á–µ–Ω–∏—è:\n\n" + places_info

                # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –±–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç–∞
                if finance_type == "budget":
                    response += (
                        "üìÖ <b>–ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:</b> —Å 20 –∏—é–Ω—è –ø–æ 20, 25 –∏—é–ª—è (–£—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏—ë–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        "üìù <b>–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π:</b> —Å 21 –∏—é–Ω—è –ø–æ 25 –∏—é–ª—è\n\n"
                        "üìã <b>–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω–∫—É—Ä—Å–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤:</b> 27 –∏—é–ª—è\n\n"
                        "üñã <b>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ:</b>\n"
                        "   ‚Ä¢ 1 –∞–≤–≥—É—Å—Ç–∞ –¥–æ 12:00 - –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –±–µ–∑ –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –Ω–∞ –º–µ—Å—Ç–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–≤–æ—Ç\n"
                        "   ‚Ä¢ 5 –∞–≤–≥—É—Å—Ç–∞ –¥–æ 12:00 - –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —ç—Ç–∞–ø–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è, –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Å—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ü–∏—Ñ—Ä –ø—Ä–∏–µ–º–∞\n\n"
                        "‚úÖ <b>–ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:</b>\n"
                        "   ‚Ä¢ 2 - 3 –∞–≤–≥—É—Å—Ç–∞ - —ç—Ç–∞–ø –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è\n\n"
                        "üìö <b>–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è:</b> ‚Äî"
                    )
                else:
                    response += (
                        "üìÖ <b>–ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:</b> —Å 20 –∏—é–Ω—è –ø–æ 20 –∞–≤–≥—É—Å—Ç–∞\n\n"
                        "üåê <b>–ù–∞—á–∞–ª–æ –ø—Ä–∏—ë–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é —Å—É–ø–µ—Ä—Å–µ—Ä–≤–∏—Å–∞ \"–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –í–£–ó –æ–Ω–ª–∞–π–Ω\":</b> 20 –∏—é–Ω—è\n\n"
                        "üìù <b>–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π:</b> —Å 21 –∏—é–Ω—è –ø–æ 23 –∞–≤–≥—É—Å—Ç–∞\n\n"
                        "üìã <b>–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤:</b> –ï–∂–µ–¥–Ω–µ–≤–Ω–æ\n\n"
                        "üñã <b>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ:</b> –ó–∞ –¥–µ–Ω—å –¥–æ –ø—Ä–∏–∫–∞–∑–∞\n\n"
                        "‚úÖ <b>–ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:</b> —Å 21 –∏—é–Ω—è –ø–æ 30 —Å–µ–Ω—Ç—è–±—Ä—è\n\n"
                        "üìö <b>–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è:</b> ‚Äî"
                    )

            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –°–ü–û
            elif level == "üìó–°–ü–û":
                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç
                if finance_type == "budget":
                    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –±—é–¥–∂–µ—Ç
                    if direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)":
                        response = (
                            "<b>–í–∞—à –≤—ã–±–æ—Ä:</b>\n"
                            "‚Ä¢ –£—Ä–æ–≤–µ–Ω—å: üìó–°–ü–û\n"
                            "‚Ä¢ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)\n"
                            "‚Ä¢ –û—Å–Ω–æ–≤–∞: üí∞–ë—é–¥–∂–µ—Ç\n\n"
                            
                            "üìë–û—á–Ω–∞—è - 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            
                            "üìÖ –ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: —Å 20 –∏—é–Ω—è –ø–æ 15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                            "üìã –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω–∫—É—Ä—Å–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤:\n"
                            "15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                            "üñã –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–µ–º–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏:\n"
                            "15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                            "‚úÖ –ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:\n"
                            "16 –∞–≤–≥—É—Å—Ç–∞\n\n"
                            "üìö –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è: –ö–æ–Ω–∫—É—Ä—Å –∞—Ç—Ç–µ—Å—Ç–∞—Ç–æ–≤\n"
                        )
                    else:
                        response += "‚ö†Ô∏è –í —ç—Ç–æ–º –≥–æ–¥—É –±—é–¥–∂–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç –Ω–µ—Ç.\n\n"
                        new_text = response
                        new_markup = create_inline_keyboard(
                            [], back_button=True, home_button=True)
                        bot.edit_message_text(
                            chat_id=chat_id,
                            message_id=message_id,
                            text=new_text,
                            reply_markup=new_markup,
                            parse_mode='HTML'
                        )
                        return

                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç
                elif finance_type == "commercial":
                    if direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)":
                        response += (
                            "üìë–û—á–Ω–∞—è - 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 15 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    elif direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)":
                        response += (
                            "üìë–û—á–Ω–∞—è - 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    elif direction == "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)":
                        response += (
                            "üìë–û—á–Ω–∞—è - 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 15 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 3.5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    elif direction == "–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á—ë—Ç (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)":
                        response += (
                            "üìë–û—á–Ω–∞—è - 2,5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç: 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                            "üìÑ–ó–∞–æ—á–Ω–∞—è ‚Äì 3.5 –≥–æ–¥–∞\n"
                            "–í—Å–µ–≥–æ –º–µ—Å—Ç - 10 (—É—Ç–æ—á–Ω—è–π—Ç–µ –≤ –ø—Ä–∏–µ–º–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏)\n\n"
                        )
                    else:
                        response += "‚ö†Ô∏è –í —ç—Ç–æ–º –≥–æ–¥—É –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç –Ω–µ—Ç.\n\n"
                        new_text = response
                        new_markup = create_inline_keyboard(
                            [], back_button=True, home_button=True)
                        bot.edit_message_text(
                            chat_id=chat_id,
                            message_id=message_id,
                            text=new_text,
                            reply_markup=new_markup,
                            parse_mode='HTML'
                        )
                        return

                # –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –°–ü–û (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π)
                if not (finance_type == "budget" and direction == "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –±–∞–∑–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)"):
                    response += (
                        "üìÖ <b>–ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:</b> —Å 20 –∏—é–Ω—è –ø–æ 15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                        "üìã <b>–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω–∫—É—Ä—Å–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤:</b>\n"
                    )

                    if finance_type == "budget":
                        response += "15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                    else:
                        response += "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ\n\n"

                    response += (
                        "üñã <b>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–µ–º–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏:</b>\n"
                    )

                    if finance_type == "budget":
                        response += "15 –∞–≤–≥—É—Å—Ç–∞\n\n"
                    else:
                        response += "–ó–∞ –¥–µ–Ω—å –¥–æ –ø—Ä–∏–∫–∞–∑–∞\n\n"

                    response += (
                        "‚úÖ <b>–ò–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏:</b>\n"
                    )

                    if finance_type == "budget":
                        response += "16 –∞–≤–≥—É—Å—Ç–∞\n\n"
                    else:
                        response += "—Å 21 –∏—é–Ω—è –ø–æ 31 –∞–≤–≥—É—Å—Ç–∞\n\n"

                    response += "üìö <b>–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è:</b> –ö–æ–Ω–∫—É—Ä—Å –∞—Ç—Ç–µ—Å—Ç–∞—Ç–æ–≤"
            
            # –î–û–ë–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω–µ—Ü –æ—Ç–≤–µ—Ç–∞
            response += get_documents_list(level)
            
            new_text = response
            # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é"
            new_markup = create_inline_keyboard(
                [], back_button=True, home_button=True)

    elif data == "back":
        current_step = user_data.get(chat_id, {}).get("step", "main_menu")

        if current_step == "edu_menu":
            user_data[chat_id] = {"step": "main_menu"}
            new_text = "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
            new_markup = create_inline_keyboard(main_menu_buttons, row_width=1)

        elif current_step == "directions":
            user_data[chat_id] = {"step": "edu_menu"}
            new_text = "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:"
            new_markup = create_inline_keyboard(
                edu_menu_buttons, row_width=2, back_button=True)

        elif current_step == "finance":
            # –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            level = user_data[chat_id].get("level", "")
            if level:
                user_data[chat_id] = {
                    "step": "directions",
                    "level": level
                }
                new_text = f"–í—ã –≤—ã–±—Ä–∞–ª–∏: {level}\n–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:"
                directions = []
                level_type = ""
                if level == "üìï–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞":
                    level_type = "magistr"
                elif level == "üìô–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç":
                    level_type = "bakalavr"
                elif level == "üìó–°–ü–û":
                    level_type = "spo"

                if level_type:
                    for i, direction in enumerate(LEVELS[level]):
                        callback_data = f"direction_{level_type}_{i}"
                        directions.append((direction, callback_data))

                    new_markup = create_inline_keyboard(
                        directions, row_width=1, back_button=True, home_button=True)

        elif current_step in ["contacts", "about"]:
            user_data[chat_id] = {"step": "edu_menu"}
            new_text = "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:"
            new_markup = create_inline_keyboard(
                edu_menu_buttons, row_width=2, back_button=True)

    elif data == "home":
        user_data[chat_id] = {"step": "main_menu"}
        new_text = "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
        new_markup = create_inline_keyboard(main_menu_buttons, row_width=1)

    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    if new_markup:
        try:
            bot.edit_message_text(
                chat_id=chat_id,
                message_id=message_id,
                text=new_text,
                reply_markup=new_markup,
                parse_mode='HTML'
            )
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
    else:
        bot.answer_callback_query(call.id, "–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")


@bot.message_handler(func=lambda message: True)
def handle_text(message):
    chat_id = message.chat.id
    if chat_id not in user_data:
        user_data[chat_id] = {"step": "main_menu"}

    bot.send_message(
        chat_id,
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏",
        reply_markup=create_inline_keyboard(main_menu_buttons, row_width=1)
    )


if __name__ == '__main__':
    print(f"üü¢ [{get_moscow_time()}] –ë–æ—Ç –¥–ª—è –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ –≤—É–∑–∞ –∑–∞–ø—É—â–µ–Ω")

    while True:
        try:
            print(f"üü¢ [{get_moscow_time()}] –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...")
            bot.polling(none_stop=True, timeout=30)

        except requests.exceptions.ConnectionError:
            error_time = get_moscow_time()
            print(
                f"üî¥ [{error_time}] –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 15 —Å–µ–∫...")
            time.sleep(15)

        except Exception as e:
            error_time = get_moscow_time()
            print(f"‚ö†Ô∏è [{error_time}] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
            print(f"‚ö†Ô∏è [{error_time}] –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥...")
            time.sleep(30)